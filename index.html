<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="./logo_myl.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Ventas M&L" />
  <title>Gestión de Ventas</title>
  
  <script type="module" crossorigin src="./index-NVVWiGcP.js"></script>
  <link rel="stylesheet" crossorigin href="./index-cqvvk0bb.css">
  <link rel="manifest" href="./manifest.webmanifest">

  <style>
    /* MEJORA 3: Fechas más grandes */
    .fecha-destacada {
        font-size: 1.1rem !important;
        font-weight: bold !important;
        color: #333;
    }
    /* MEJORA 4: Importe Top Clientes más grande */
    .importe-gigante {
        font-size: 1.3rem !important; 
        font-weight: 800 !important;
        color: #2563eb; /* Azul corporativo */
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script>
    // Este "vigilante" observa la pantalla y cambia los textos al vuelo
    const observer = new MutationObserver((mutations) => {
      
      // 1. CAMBIAR "ANUAL" POR "VENTAS"
      // Buscamos títulos h1, h2 o divs que contengan exactamente "Anual"
      document.querySelectorAll('h1, h2, h3, div').forEach(el => {
          // Cuidado de no cambiar "Top Clientes Anual" (Punto 4)
          if (el.textContent.trim() === "Anual") {
              el.textContent = "Ventas";
          }
      });

      // 2. CAMBIAR TEXTOS DE HISTÓRICO
      document.querySelectorAll('*').forEach(el => {
          // Cambiar título principal
          if (el.childNodes.length === 1 && el.textContent.trim() === "Histórico Ventas") {
              el.textContent = "Ventas medias mensuales";
          }
          // Cambiar subtítulo inferior
          if (el.childNodes.length === 1 && el.textContent.trim() === "Media mensual global") {
              el.textContent = "Venta media anual";
          }
      });

      // 3. CAMBIAR FECHAS A DD-MM-AAAA
      // Buscamos celdas o textos que tengan formato AAAA-MM-DD (Ej: 2026-01-09)
      const regexFecha = /^(\d{4})-(\d{2})-(\d{2})$/;
      document.querySelectorAll('td, div, span, p').forEach(el => {
          const texto = el.textContent.trim();
          if (regexFecha.test(texto)) {
              // Le damos la vuelta a la fecha
              el.textContent = texto.replace(regexFecha, '$3-$2-$1');
              // Le añadimos la clase para que se vea grande (CSS de arriba)
              el.classList.add('fecha-destacada');
          }
      });

      // 4. TOP CLIENTES (Texto e Importes)
      // Buscamos la sección de Top Clientes
      const titulosSeccion = document.querySelectorAll('h2, h3, div');
      titulosSeccion.forEach(titulo => {
          if (titulo.textContent.includes("Top Clientes")) {
              // A. Cambiar "Histórico" por "Anual" en esta zona
              const contenedorPadre = titulo.closest('div').parentElement; // Subimos para buscar botones cerca
              if (contenedorPadre) {
                 contenedorPadre.querySelectorAll('button, div').forEach(btn => {
                     if (btn.textContent.trim() === "Histórico") {
                         btn.textContent = "Anual";
                     }
                 });
                 
                 // B. Poner importes más grandes
                 // Buscamos los precios (contienen € y comas/puntos) dentro de esta sección
                 const importes = contenedorPadre.querySelectorAll('span, div');
                 importes.forEach(imp => {
                     if (imp.textContent.includes('€') && !imp.classList.contains('importe-gigante')) {
                         imp.classList.add('importe-gigante');
                     }
                 });
              }
          }
      });

    });

    // Iniciar el vigilante
    observer.observe(document.body, { childList: true, subtree: true });
  </script>
</body>
</html>
